<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ¶ ç‹—ç‹—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>

  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background: #ffeef2;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      align-items: center;
    }

    .container {
      background: #fff;
      width: 90%;
      max-width: 420px;
      padding: 24px;
      border-radius: 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }

    h2 {
      margin-bottom: 20px;
      color: #ff6f91;
    }

    label {
      display: block;
      margin-top: 12px;
      color: #444;
      font-weight: bold;
      text-align: left;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
    }

    .btn-group {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }

    button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: 0.2s;
    }

    .btn-calc {
      background: #ff8fab;
      color: white;
    }

    .btn-calc:hover {
      background: #ff6f91;
    }

    .btn-reset {
      background: #d3d3d3;
    }

    .btn-reset:hover {
      background: #bcbcbc;
    }

    .result-card {
      background: #fff1f5;
      padding: 18px;
      border-radius: 14px;
      margin-top: 20px;
      display: none;
    }

    .result-card h3 {
      margin: 0 0 10px 0;
      color: #ff6f91;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>ğŸ¾ ç‹—ç‹—æ­²æ•¸è¨ˆç®—æ©Ÿ</h2>

    <label>ç‹—ç‹—çš„åå­—ï¼š</label>
    <input type="text" id="dogName" placeholder="è¼¸å…¥ç‹—ç‹—åå­—">

    <label>ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼š</label>
    <input type="date" id="dogBirthday">

    <label>ç‹—ç‹—é«”å‹ï¼š</label>
    <select id="dogSize">
      <option value="small">å°å‹çŠ¬</option>
      <option value="medium">ä¸­å‹çŠ¬</option>
      <option value="large">å¤§å‹çŠ¬</option>
    </select>

    <div class="btn-group">
      <button class="btn-calc" onclick="calculate()">è¨ˆç®—</button>
      <button class="btn-reset" onclick="resetAll()">é‡å¡«</button>
    </div>

    <div class="result-card" id="resultCard">
      <h3 id="nameText"></h3>
      <p id="ageText"></p>
      <p id="humanAgeText"></p>
    </div>
  </div>

  <script>
    // -------- è‡ªå‹•è¼‰å…¥ localStorage --------
    window.onload = function () {
      const saved = localStorage.getItem("dogData");
      if (saved) {
        const data = JSON.parse(saved);
        document.getElementById("dogName").value = data.name;
        document.getElementById("dogBirthday").value = data.birthday;
        document.getElementById("dogSize").value = data.size;

        showResult(data);
      }
    };

    // -------- è¨ˆç®—é‚è¼¯ --------
    function calculate() {
      const name = document.getElementById("dogName").value.trim();
      const birthday = document.getElementById("dogBirthday").value;
      const size = document.getElementById("dogSize").value;

      if (!name || !birthday) {
        alert("è«‹è¼¸å…¥å®Œæ•´è³‡è¨Šï¼");
        return;
      }

      const dogAge = getDogAge(birthday);
      const humanAge = convertHumanAge(dogAge, size);

      const data = { 
        name, 
        birthday, 
        size, 
        dogAge, 
        humanAge 
      };

      // å„²å­˜åˆ° localStorage
      localStorage.setItem("dogData", JSON.stringify(data));

      showResult(data);
    }

    // -------- è¨ˆç®—ç‹—ç‹—å¯¦éš›å¹´é½¡ --------
    function getDogAge(birthday) {
      const birth = new Date(birthday);
      const today = new Date();

      let age = today.getFullYear() - birth.getFullYear();
      const hasBirthdayPassed =
        today.getMonth() > birth.getMonth() ||
        (today.getMonth() === birth.getMonth() && today.getDate() >= birth.getDate());

      if (!hasBirthdayPassed) age--;

      return age;
    }

    // -------- æ›ç®—äººé¡å¹´é½¡ï¼ˆä¾é«”å‹ï¼‰ --------
    function convertHumanAge(dogAge, size) {
      const rate = {
        small: 5,
        medium: 6,
        large: 7,
      };
      return dogAge * rate[size];
    }

    // -------- é¡¯ç¤ºçµæœ --------
    function showResult(data) {
      document.getElementById("nameText").innerText = `ğŸ¶ ${data.name}`;
      document.getElementById("ageText").innerText = `ç‹—ç‹—çš„å¯¦éš›å¹´é½¡ï¼š${data.dogAge} æ­²`;
      document.getElementById("humanAgeText").innerText = `æ›ç®—äººé¡å¹´é½¡ï¼šç´„ ${data.humanAge} æ­²`;

      document.getElementById("resultCard").style.display = "block";
    }

    // -------- é‡å¡«åŠŸèƒ½ --------
    function resetAll() {
      document.getElementById("dogName").value = "";
      document.getElementById("dogBirthday").value = "";
      document.getElementById("dogSize").value = "small"; // é è¨­

      localStorage.removeItem("dogData");

      document.getElementById("resultCard").style.display = "none";
    }
  </script>

</body>
</html>
